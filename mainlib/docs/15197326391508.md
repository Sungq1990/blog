# php
#### Trait关键字
~~~txt
Trait能够把模块化的实现方式注入多个无关的类中，从而提高代码复用，符合DRY（Don’t Repeat Yourself）原则
Trait支持嵌套和组合，即通过一个或多个Trait（多个用,分隔）组合成一个Trait
使用多个Trait可能会引起命名冲突问题，使用insteadof关键字
~~~
#### 父类方法是protected，子类重构为private，会发生什么？
~~~txt
会发生fatal错误，因为继承的方法或属性只能维持或放大权限，不能缩小，比如protected重载为public是可行的
~~~
#### [pack and unpack](http://www.phpdig.net/ref/rn45re877.html)
~~~txt
pack:将对应的参数打包成二进制字符串
unpack:数据解包
~~~
#### php static延时绑定特性

```
class A{
    static $name = "Tom";
    public function printName(){
        echo self::$name."\n";
        self::fun();
    }
    static function fun(){
        echo "A Class\n";
    }
}
class B extends A{
    static $name = "Jon";
    static function fun(){
        echo "B Class\n";
    }
}
$obj = new B();
$obj->printName();
// 输出结果
// Tom
// A Class
```
```
class A{
    static $name = "Tom";
    public function printName(){
        echo static::$name."\n";
        static::fun();
    }
    static function fun(){
        echo "A Class\n";
    }
}
class B extends A{
    static $name = "Jon";
    static function fun(){
        echo "B Class\n";
    }
}
$obj = new B();
$obj->printName();
// 输出结果
// Join
// B Class
```
#### 解决php中json_decode的异常JSON_ERROR_CTRL_CHAR
```
该字符中含了ASCII码ETB控制符，即\x17导致json解析失败
解决方法如下：去掉0-31的控制符再进行decode

$result = "json格式字符串";
$result = preg_replace('/[\x00-\x1F]/','', $result);
$result = json_decode($result);
```
#### 空合并运算符（??）
```txt
$param = $_GET['param'] ?? 1;
相当于：
$param = isset($_GET['param']) ? $_GET['param'] : 1;
```


